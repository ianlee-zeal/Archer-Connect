<div class="row">

  <ng-container *ngIf="this.allStages">
    <div class="col-4 pie-chart">
      <div class="pie-chart__header">
        <span class="chart-name">Claimants by Release Status</span>
      </div>
      <div class="row pie-chart__chart">
        <ng-container *ngIf="stagesChart">
          <fusioncharts width="100%" height="300" class="w-100" dataFormat="json" type="doughnut2d"
            placeholder="Loading..." [dataSource]="stagesChart">
          </fusioncharts>
        </ng-container>
      </div>
      <ng-container *ngIf="stagesSummary?.totalCount > 0">
        <div class="chart-status-legend-container">
          <div class="row align-items-center" *ngFor="let stage of allStages">
            <span class="legend-icon" [ngStyle]="{background: getStageColor(stage.id)}"></span>
            <span class="legend-label">{{stage.name}}</span>
          </div>
        </div>
      </ng-container>
    </div>
  </ng-container>

  <ng-container *ngIf="this.allPhases">
    <div class="col-4 pie-chart">
      <div class="pie-chart__header">
        <span class="chart-name">Release Count by Phases</span>
      </div>
      <div class="row pie-chart__chart">
        <ng-container *ngIf="phasesChart">
          <fusioncharts width="100%" height="300" class="w-100" dataFormat="json" type="doughnut2d"
            placeholder="Loading..." [dataSource]="phasesChart">
          </fusioncharts>
        </ng-container>
      </div>
      <ng-container *ngIf="phasesSummary">
        <div class="chart-phases-legend-container" [class.content-start]="phasesSummary.phases.length > 3">
          <div class="phase-legend-item" [class.legend-item-small]="phasesSummary.phases.length > 6" *ngFor="let phase of phasesSummary.phases">
            <span class="legend-icon" [ngStyle]="{background: phase.hexColor}"></span>
            <span class="legend-name" [title]="phase.name">{{phase.name}}</span>
          </div>
        </div>
      </ng-container>
    </div>
  </ng-container>

  <ng-container *ngIf="releaseInGoodOrderChart">
    <div class="col-4 pie-chart">
      <div class="pie-chart__header">
        <span class="chart-name">Releases In Good Order?</span>
      </div>
      <div class="row pie-chart__chart">
        <fusioncharts width="100%" height="300" class="w-100" dataFormat="json" type="doughnut2d"
          placeholder="Loading..." [dataSource]="releaseInGoodOrderChart">
        </fusioncharts>
      </div>
      <ng-container *ngIf="yesReleaseInGoodOrder.value || noReleaseInGoodOrder.value">
        <div class="chart-status-legend-container">
          <div class="row align-items-center" *ngFor="let item of releaseInGoodOrderChart.data">
            <span class="legend-icon" [ngStyle]="{background: item.color}"></span>
            <span class="legend-label">{{item.label}}</span>
          </div>
        </div>
      </ng-container>
    </div>
  </ng-container>

</div>
